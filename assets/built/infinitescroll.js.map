{"version":3,"sources":["infinitescroll.js"],"names":["window","document","nextElement","querySelector","feedElement","loading","getElementById","addEventListener","onUpdate","passive","onPageLoad","this","status","response","querySelectorAll","forEach","item","appendChild","resNextElement","href","removeEventListener","xhr","XMLHttpRequest","responseType","open","send"],"mappings":"CAIA,SAAUA,EAAQC,GAGd,IAAIC,EAAcD,EAASE,cAAc,kBACzC,GAAKD,EAAL,CAGA,IAAIE,EAAcH,EAASE,cAAc,cACzC,GAAKC,EAAL,CAEA,IAAIC,GAAU,EA4CdJ,EACKK,eAAe,eACfC,iBAAiB,QAASC,EAAU,CAAEC,SAAS,KA5CpD,SAASC,IACL,GAAoB,MAAhBC,KAAKC,OAAT,CAOmBD,KAAKE,SAASC,iBAAiB,cACrCC,QAAQ,SAASC,GAC1BZ,EAAYa,YAAYD,KAI5B,IAAIE,EAAiBP,KAAKE,SAASV,cAAc,kBAC7Ce,EACAhB,EAAYiB,KAAOD,EAAeC,KAElClB,EACKK,eAAe,eACfc,oBAAoB,QAASZ,GAItCH,GAAU,OAtBNJ,EACKK,eAAe,eACfc,oBAAoB,QAASZ,GAuB1C,SAASA,IAEL,IAAIH,EAAJ,CAEAA,GAAU,EAEV,IAAIgB,EAAM,IAAIrB,EAAOsB,eACrBD,EAAIE,aAAe,WAEnBF,EAAId,iBAAiB,OAAQG,GAE7BW,EAAIG,KAAK,MAAOtB,EAAYiB,MAC5BE,EAAII,KAAK,QAnDjB,CAyDGzB,OAAQC","file":"infinitescroll.js","sourcesContent":["/**\n * Infinite Scroll\n */\n\n(function(window, document) {\n    // next link element\n\n    var nextElement = document.querySelector(\"link[rel=next]\");\n    if (!nextElement) return;\n\n    // post feed element\n    var feedElement = document.querySelector(\".post-feed\");\n    if (!feedElement) return;\n\n    var loading = false;\n\n    function onPageLoad() {\n        if (this.status === 404) {\n            document\n                .getElementById(\"readMoreBtn\")\n                .removeEventListener(\"click\", onUpdate);\n            return;\n        }\n        // append contents\n        var postElements = this.response.querySelectorAll(\".post-card\");\n        postElements.forEach(function(item) {\n            feedElement.appendChild(item);\n        });\n\n        // set next link\n        var resNextElement = this.response.querySelector(\"link[rel=next]\");\n        if (resNextElement) {\n            nextElement.href = resNextElement.href;\n        } else {\n            document\n                .getElementById(\"readMoreBtn\")\n                .removeEventListener(\"click\", onUpdate);\n        }\n\n        // sync status\n        loading = false;\n    }\n\n    function onUpdate() {\n        // return if already loading\n        if (loading) return;\n\n        loading = true;\n\n        var xhr = new window.XMLHttpRequest();\n        xhr.responseType = \"document\";\n\n        xhr.addEventListener(\"load\", onPageLoad);\n\n        xhr.open(\"GET\", nextElement.href);\n        xhr.send(null);\n    }\n\n    document\n        .getElementById(\"readMoreBtn\")\n        .addEventListener(\"click\", onUpdate, { passive: true });\n})(window, document);\n"],"sourceRoot":"/source/"}